var k=Object.defineProperty;var E=(l,t,e)=>t in l?k(l,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):l[t]=e;var i=(l,t,e)=>E(l,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function e(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(o){if(o.ep)return;o.ep=!0;const n=e(o);fetch(o.href,n)}})();const h={workDuration:25,shortBreak:5,longBreak:15,sessionsUntilLongBreak:4,autoStartBreaks:!1,soundEnabled:!0},c={WORK:"work",SHORT_BREAK:"shortBreak",LONG_BREAK:"longBreak"},d={IDLE:"idle",RUNNING:"running",PAUSED:"paused",COMPLETED:"completed"},m={SETTINGS:"fokus_settings",STATISTICS:"fokus_statistics",SESSION_HISTORY:"fokus_session_history"};class w extends EventTarget{constructor(e){super();i(this,"timeRemaining",0);i(this,"sessionType",c.WORK);i(this,"state",d.IDLE);i(this,"sessionsCompleted",0);i(this,"intervalId",null);i(this,"settings",{...h});e&&this.updateSettings(e),this.reset()}start(){this.state===d.IDLE&&(this.timeRemaining=this.getCurrentSessionDuration()*60),this.state=d.RUNNING,this.intervalId=window.setInterval(()=>{this.tick()},1e3),this.dispatchTimerEvent()}pause(){this.state===d.RUNNING&&(this.state=d.PAUSED,this.clearInterval(),this.dispatchTimerEvent())}resume(){this.state===d.PAUSED&&this.start()}reset(){this.state=d.IDLE,this.clearInterval(),this.timeRemaining=this.getCurrentSessionDuration()*60,this.dispatchTimerEvent()}skip(){this.completeSession()}updateSettings(e){this.settings={...this.settings,...e},this.state===d.IDLE&&(this.timeRemaining=this.getCurrentSessionDuration()*60,this.dispatchTimerEvent())}tick(){this.timeRemaining--,this.timeRemaining<=0?this.completeSession():this.dispatchTimerEvent()}completeSession(){this.state=d.COMPLETED,this.clearInterval(),this.sessionType===c.WORK&&this.sessionsCompleted++,this.dispatchTimerEvent(),setTimeout(()=>{this.advanceToNextSession()},1e3)}advanceToNextSession(){this.sessionType=this.getNextSessionType(),this.timeRemaining=this.getCurrentSessionDuration()*60,this.state=d.IDLE,this.settings.autoStartBreaks&&this.sessionType!==c.WORK?this.start():this.dispatchTimerEvent()}getNextSessionType(){return this.sessionType===c.WORK?this.sessionsCompleted%this.settings.sessionsUntilLongBreak===0?c.LONG_BREAK:c.SHORT_BREAK:c.WORK}getCurrentSessionDuration(){switch(this.sessionType){case c.WORK:return this.settings.workDuration;case c.SHORT_BREAK:return this.settings.shortBreak;case c.LONG_BREAK:return this.settings.longBreak;default:return this.settings.workDuration}}clearInterval(){this.intervalId!==null&&(window.clearInterval(this.intervalId),this.intervalId=null)}dispatchTimerEvent(){const e=this.getCurrentSessionDuration()*60,s=e>0?(e-this.timeRemaining)/e*100:0,o={timeRemaining:this.timeRemaining,sessionType:this.sessionType,state:this.state,sessionsCompleted:this.sessionsCompleted,progress:s};this.dispatchEvent(new CustomEvent("timerUpdate",{detail:o}))}getTimeRemaining(){return this.timeRemaining}getSessionType(){return this.sessionType}getState(){return this.state}getSessionsCompleted(){return this.sessionsCompleted}getSettings(){return{...this.settings}}}class D{constructor(t){i(this,"timer");i(this,"sessionTypeElement");i(this,"timeDisplayElement");i(this,"progressFillElement");this.timer=t,this.sessionTypeElement=document.querySelector(".session-type"),this.timeDisplayElement=document.querySelector(".time-display"),this.progressFillElement=document.querySelector(".progress-fill"),this.timer.addEventListener("timerUpdate",this.handleTimerUpdate.bind(this)),this.updateDisplay()}handleTimerUpdate(t){const e=t.detail;this.updateDisplay(e)}updateDisplay(t){if(!t){this.sessionTypeElement.textContent=this.getSessionTypeText(this.timer.getSessionType()),this.timeDisplayElement.textContent=this.formatTime(this.timer.getTimeRemaining()),this.updateProgressIndicators(0);return}const{timeRemaining:e,sessionType:s,state:o,progress:n}=t;this.sessionTypeElement.textContent=this.getSessionTypeText(s),this.timeDisplayElement.textContent=this.formatTime(e),this.updateProgressIndicators(n),this.updateCircularTimerGradient(s),this.updateVisualState(o,s),this.updateDocumentTitle(e,s,o)}updateProgressIndicators(t){this.progressFillElement&&(this.progressFillElement.style.width=`${t}%`)}updateCircularTimerGradient(t){}getSessionTypeText(t){switch(t){case c.WORK:return"Work Session";case c.SHORT_BREAK:return"Short Break";case c.LONG_BREAK:return"Long Break";default:return"Session"}}formatTime(t){const e=Math.floor(t/60),s=t%60;return`${e.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`}updateVisualState(t,e){const s=document.querySelector(".timer-section");s.classList.remove("running","paused","completed","work","break"),s.classList.add(t),e===c.WORK?s.classList.add("work"):s.classList.add("break")}updateDocumentTitle(t,e,s){if(s===d.RUNNING){const o=this.formatTime(t),n=e===c.WORK?"Work":"Break";document.title=`${o} - ${n} | Fokus`}else document.title="Fokus - Pomodoro Timer"}}class C{constructor(t){i(this,"timer");i(this,"startPauseBtn");i(this,"resetBtn");this.timer=t,this.startPauseBtn=document.getElementById("start-pause-btn"),this.resetBtn=document.getElementById("reset-btn"),this.bindEvents(),this.timer.addEventListener("timerUpdate",this.handleTimerUpdate.bind(this))}bindEvents(){this.startPauseBtn.addEventListener("click",()=>{this.handleStartPauseClick()}),this.resetBtn.addEventListener("click",()=>{this.timer.reset()}),document.addEventListener("keydown",t=>{t.code==="Space"&&!this.isInputFocused()?(t.preventDefault(),this.handleStartPauseClick()):t.code==="KeyR"&&!this.isInputFocused()&&(t.preventDefault(),this.timer.reset())})}handleStartPauseClick(){switch(this.timer.getState()){case d.IDLE:case d.PAUSED:this.timer.start();break;case d.RUNNING:this.timer.pause();break}}handleTimerUpdate(t){const{state:e}=t.detail;this.updateButtonStates(e)}updateButtonStates(t){switch(t){case d.IDLE:this.startPauseBtn.textContent="Start",this.startPauseBtn.className="control-btn primary",this.resetBtn.disabled=!1;break;case d.RUNNING:this.startPauseBtn.textContent="Pause",this.startPauseBtn.className="control-btn secondary",this.resetBtn.disabled=!1;break;case d.PAUSED:this.startPauseBtn.textContent="Resume",this.startPauseBtn.className="control-btn primary",this.resetBtn.disabled=!1;break;case d.COMPLETED:this.startPauseBtn.textContent="Start Next",this.startPauseBtn.className="control-btn primary",this.resetBtn.disabled=!0;break}}isInputFocused(){const t=document.activeElement;return t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement||t instanceof HTMLSelectElement}}class b{constructor(t){i(this,"timer");i(this,"sessionsElement");i(this,"focusTimeElement");i(this,"streakElement");i(this,"dailyStats");this.timer=t,this.sessionsElement=document.getElementById("sessions-completed"),this.focusTimeElement=document.getElementById("focus-time"),this.streakElement=document.getElementById("current-streak"),this.dailyStats=this.loadTodaysStats(),this.timer.addEventListener("timerUpdate",this.handleTimerUpdate.bind(this)),this.updateDisplay()}handleTimerUpdate(t){const{state:e,sessionType:s,sessionsCompleted:o}=t.detail;e===d.COMPLETED&&s===c.WORK&&this.recordCompletedSession(),this.updateSessionsFromTimer(o)}recordCompletedSession(){const t=this.getTodayString();this.dailyStats.date!==t&&(this.dailyStats={date:t,sessionsCompleted:0,focusTimeMinutes:0,streak:this.calculateNewDayStreak()}),this.dailyStats.sessionsCompleted++,this.dailyStats.focusTimeMinutes+=this.timer.getSettings().workDuration,this.dailyStats.streak=this.calculateCurrentStreak(),this.saveStats(),this.updateDisplay()}updateSessionsFromTimer(t){this.dailyStats.sessionsCompleted!==t&&(this.dailyStats.sessionsCompleted=t,this.updateDisplay())}updateDisplay(){this.sessionsElement.textContent=this.dailyStats.sessionsCompleted.toString(),this.focusTimeElement.textContent=this.formatFocusTime(this.dailyStats.focusTimeMinutes),this.streakElement.textContent=this.dailyStats.streak.toString()}formatFocusTime(t){const e=Math.floor(t/60),s=t%60;return e>0?`${e}h ${s}m`:`${s}m`}loadTodaysStats(){const t=this.getTodayString(),e=localStorage.getItem("fokus_daily_stats");if(e){const s=JSON.parse(e);if(s.date===t)return s}return{date:t,sessionsCompleted:0,focusTimeMinutes:0,streak:this.loadStreakFromHistory()}}saveStats(){localStorage.setItem("fokus_daily_stats",JSON.stringify(this.dailyStats)),this.saveToHistory()}saveToHistory(){const t="fokus_session_history",e=localStorage.getItem(t),s=e?JSON.parse(e):[],o=s.findIndex(r=>r.date===this.dailyStats.date);o>=0?s[o]={...this.dailyStats}:s.push({...this.dailyStats});const n=new Date;n.setDate(n.getDate()-30);const a=s.filter(r=>new Date(r.date)>=n);localStorage.setItem(t,JSON.stringify(a))}loadStreakFromHistory(){const e=localStorage.getItem("fokus_session_history");if(!e)return 0;const s=JSON.parse(e);return this.calculateStreakFromHistory(s)}calculateStreakFromHistory(t){if(t.length===0)return 0;const e=t.sort((a,r)=>new Date(r.date).getTime()-new Date(a.date).getTime());let s=0;const o=new Date;let n=new Date(o);for(const a of e){const r=new Date(a.date);if(this.isSameDate(r,n)&&a.sessionsCompleted>0)s++,n.setDate(n.getDate()-1);else if(this.isSameDate(r,n))break}return s}calculateNewDayStreak(){return this.loadStreakFromHistory()}calculateCurrentStreak(){return this.dailyStats.sessionsCompleted>0?this.loadStreakFromHistory()+1:this.loadStreakFromHistory()}getTodayString(){return new Date().toISOString().split("T")[0]}isSameDate(t,e){return t.toISOString().split("T")[0]===e.toISOString().split("T")[0]}getStats(){return{...this.dailyStats}}}class x{constructor(t){i(this,"timer");i(this,"workDurationInput");i(this,"shortBreakInput");i(this,"longBreakInput");i(this,"autoStartInput");i(this,"soundEnabledInput");this.timer=t,this.workDurationInput=document.getElementById("work-duration"),this.shortBreakInput=document.getElementById("short-break"),this.longBreakInput=document.getElementById("long-break"),this.autoStartInput=document.getElementById("auto-start"),this.soundEnabledInput=document.getElementById("sound-enabled"),this.loadSettings(),this.bindEvents()}bindEvents(){let t;const e=()=>{clearTimeout(t),t=window.setTimeout(()=>{this.saveAndApplySettings()},500)};this.workDurationInput.addEventListener("input",e),this.shortBreakInput.addEventListener("input",e),this.longBreakInput.addEventListener("input",e),this.autoStartInput.addEventListener("change",()=>{this.saveAndApplySettings()}),this.soundEnabledInput.addEventListener("change",()=>{this.saveAndApplySettings()}),[this.workDurationInput,this.shortBreakInput,this.longBreakInput].forEach(s=>{s.addEventListener("blur",()=>{this.validateInput(s)})})}validateInput(t){const e=parseInt(t.value),s=parseInt(t.min),o=parseInt(t.max);isNaN(e)||e<s?t.value=s.toString():e>o&&(t.value=o.toString())}loadSettings(){const t=localStorage.getItem("fokus_settings");let e;if(t)try{const s=JSON.parse(t);e={...h,...s}}catch{e={...h}}else e={...h};this.workDurationInput.value=e.workDuration.toString(),this.shortBreakInput.value=e.shortBreak.toString(),this.longBreakInput.value=e.longBreak.toString(),this.autoStartInput.checked=e.autoStartBreaks,this.soundEnabledInput.checked=e.soundEnabled,this.timer.updateSettings(e)}saveAndApplySettings(){this.validateInput(this.workDurationInput),this.validateInput(this.shortBreakInput),this.validateInput(this.longBreakInput);const t={workDuration:parseInt(this.workDurationInput.value),shortBreak:parseInt(this.shortBreakInput.value),longBreak:parseInt(this.longBreakInput.value),autoStartBreaks:this.autoStartInput.checked,soundEnabled:this.soundEnabledInput.checked,sessionsUntilLongBreak:h.sessionsUntilLongBreak};localStorage.setItem("fokus_settings",JSON.stringify(t)),this.timer.updateSettings(t),document.dispatchEvent(new CustomEvent("settingsChanged",{detail:t}))}getSettings(){return{workDuration:parseInt(this.workDurationInput.value),shortBreak:parseInt(this.shortBreakInput.value),longBreak:parseInt(this.longBreakInput.value),autoStartBreaks:this.autoStartInput.checked,soundEnabled:this.soundEnabledInput.checked,sessionsUntilLongBreak:h.sessionsUntilLongBreak}}resetToDefaults(){this.workDurationInput.value=h.workDuration.toString(),this.shortBreakInput.value=h.shortBreak.toString(),this.longBreakInput.value=h.longBreak.toString(),this.autoStartInput.checked=h.autoStartBreaks,this.soundEnabledInput.checked=h.soundEnabled,this.saveAndApplySettings()}}const u="fokus_todos",y=24*60*60*1e3,p=class p{constructor(){i(this,"todos",[]);this.loadTodos()}static getInstance(){return p.instance||(p.instance=new p),p.instance}loadTodos(){try{let t=sessionStorage.getItem(u);if(t){const e=JSON.parse(t);this.todos=e.todos||[]}else if(t=localStorage.getItem(u),t){const e=JSON.parse(t);if(Date.now()>e.expiresAt){this.clearExpiredData();return}this.todos=e.todos||[],this.saveTodos(),localStorage.removeItem(u)}}catch(t){console.warn("Failed to load todos:",t),this.todos=[]}}saveTodos(){try{const t={todos:this.todos,expiresAt:Date.now()+y};sessionStorage.setItem(u,JSON.stringify(t)),localStorage.setItem(u,JSON.stringify(t))}catch(t){console.warn("Failed to save todos:",t)}}clearExpiredData(){this.todos=[],localStorage.removeItem(u),sessionStorage.removeItem(u)}addTodo(t){const e={id:this.generateId(),text:t.trim(),completed:!1,createdAt:Date.now()};return this.todos.unshift(e),this.saveTodos(),e}toggleTodo(t){const e=this.todos.find(s=>s.id===t);return e?(e.completed=!e.completed,this.saveTodos(),e):null}deleteTodo(t){const e=this.todos.findIndex(s=>s.id===t);return e!==-1?(this.todos.splice(e,1),this.saveTodos(),!0):!1}updateTodo(t,e){const s=this.todos.find(o=>o.id===t);return s?(s.text=e.trim(),this.saveTodos(),s):null}getTodos(){return[...this.todos]}getActiveTodos(){return this.todos.filter(t=>!t.completed)}getCompletedTodos(){return this.todos.filter(t=>t.completed)}getTodoCount(){const t=this.todos.length,e=this.todos.filter(o=>o.completed).length,s=t-e;return{total:t,active:s,completed:e}}clearCompleted(){const t=this.todos.filter(e=>e.completed).length;return this.todos=this.todos.filter(e=>!e.completed),this.saveTodos(),t}clearAll(){this.todos=[],this.saveTodos()}generateId(){return`todo_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}getCacheInfo(){try{const t=localStorage.getItem(u)||sessionStorage.getItem(u);if(t){const e=JSON.parse(t),s=Math.max(0,e.expiresAt-Date.now()),o=s===0;return{expiresAt:e.expiresAt,timeRemaining:s,isExpired:o,totalItems:this.todos.length}}}catch(t){console.warn("Failed to get cache info:",t)}return{expiresAt:Date.now()+y,timeRemaining:y,isExpired:!1,totalItems:this.todos.length}}getTimeUntilExpiry(){const{timeRemaining:t}=this.getCacheInfo();if(t<=0)return"Expired";const e=Math.floor(t/(1e3*60*60)),s=Math.floor(t%(1e3*60*60)/(1e3*60));return e>0?`${e}h ${s}m remaining`:`${s}m remaining`}static cleanupExpiredData(){try{const t=localStorage.getItem(u);if(t){const e=JSON.parse(t);Date.now()>e.expiresAt&&(localStorage.removeItem(u),sessionStorage.removeItem(u))}}catch(t){console.warn("Failed to cleanup expired data:",t)}}};i(p,"instance");let f=p;class B{constructor(){i(this,"todoStorage");i(this,"container");i(this,"todoInput");i(this,"addButton");i(this,"todoList");i(this,"todoCount",null);if(this.todoStorage=f.getInstance(),this.container=document.querySelector(".todo-section"),!this.container)throw new Error("Todo container not found");this.initializeElements(),this.bindEvents(),this.render(),f.cleanupExpiredData()}initializeElements(){if(this.todoInput=this.container.querySelector(".todo-input"),this.addButton=this.container.querySelector(".add-todo-btn"),this.todoList=this.container.querySelector(".todo-list"),this.todoCount=this.container.querySelector(".todo-count"),!this.todoInput||!this.addButton||!this.todoList)throw new Error("Required todo elements not found")}bindEvents(){this.addButton.addEventListener("click",t=>{t.preventDefault(),this.handleAddTodo()}),this.todoInput.addEventListener("keypress",t=>{t.key==="Enter"&&(t.preventDefault(),this.handleAddTodo())}),this.todoInput.addEventListener("input",()=>{this.updateAddButtonState()}),this.setupTouchEvents()}setupTouchEvents(){let t=0,e=0,s=null;this.todoList.addEventListener("touchstart",o=>{o.touches.length===1&&(t=o.touches[0].clientX,e=Date.now(),s=o.target.closest(".todo-item"))},{passive:!0}),this.todoList.addEventListener("touchend",o=>{if(s&&o.changedTouches.length===1){const a=o.changedTouches[0].clientX,r=Date.now()-e;if(t-a>50&&r<500){const I=s.dataset.todoId;I&&this.deleteTodo(I)}}s=null},{passive:!0})}handleAddTodo(){const t=this.todoInput.value.trim();if(t===""){this.showInputError("Please enter a task");return}if(t.length>200){this.showInputError("Task is too long (max 200 characters)");return}try{this.todoStorage.addTodo(t),this.todoInput.value="",this.updateAddButtonState(),this.render(),this.showSuccessMessage("Task added successfully"),this.todoInput.focus()}catch(e){this.showInputError("Failed to add task"),console.error("Error adding todo:",e)}}updateAddButtonState(){const t=this.todoInput.value.trim().length>0;this.addButton.disabled=!t,this.addButton.textContent=t?"Add":"Add Task"}showInputError(t){this.todoInput.style.borderColor="#EF4444",this.todoInput.placeholder=t,setTimeout(()=>{this.todoInput.style.borderColor="",this.todoInput.placeholder="Add a new task..."},2e3),this.todoInput.focus()}showSuccessMessage(t){var s,o;const e=document.createElement("div");e.textContent="‚úì",e.style.cssText=`
      position: absolute;
      right: 12px;
      top: 50%;
      transform: translateY(-50%);
      color: var(--secondary-emerald);
      font-weight: bold;
      font-size: 18px;
      pointer-events: none;
      animation: fadeInOut 1s ease-in-out;
    `,(s=this.todoInput.parentElement)==null||s.style.setProperty("position","relative"),(o=this.todoInput.parentElement)==null||o.appendChild(e),setTimeout(()=>{e.remove()},1e3)}completeTodo(t){try{const e=this.todoStorage.toggleTodo(t);e&&(this.render(),this.animateCompletion(t,e.completed))}catch(e){console.error("Error toggling todo:",e)}}deleteTodo(t){try{this.todoStorage.deleteTodo(t)&&(this.animateRemoval(t),setTimeout(()=>{this.render()},300))}catch(e){console.error("Error deleting todo:",e)}}animateCompletion(t,e){const s=this.todoList.querySelector(`[data-todo-id="${t}"]`);s&&(s.style.transform=e?"scale(0.95)":"scale(1.05)",s.style.opacity=e?"0.7":"1",setTimeout(()=>{s.style.transform="scale(1)",s.style.opacity="1"},200))}animateRemoval(t){const e=this.todoList.querySelector(`[data-todo-id="${t}"]`);e&&(e.style.animation="slideOut 0.3s ease-in forwards")}render(){const t=this.todoStorage.getTodos(),e=this.todoStorage.getTodoCount();if(this.todoCount&&(this.todoCount.textContent=`${e.active} active, ${e.completed} completed`),this.todoList.innerHTML="",t.length===0){this.renderEmptyState();return}t.forEach(s=>{const o=this.createTodoElement(s);this.todoList.appendChild(o)}),this.updateAddButtonState()}renderEmptyState(){const t=document.createElement("div");t.className="todo-empty",t.innerHTML=`
      <div style="font-size: 2rem; margin-bottom: 0.5rem;">üìù</div>
      <p>No tasks yet. Add one above to get started!</p>
      <p style="font-size: 0.875rem; margin-top: 0.5rem; opacity: 0.7;">
        Tasks are saved for 24 hours
      </p>
    `,this.todoList.appendChild(t)}createTodoElement(t){const e=document.createElement("div");e.className="todo-item",e.dataset.todoId=t.id;const s=t.completed,o=this.getTimeAgo(t.createdAt);e.innerHTML=`
      <div class="todo-text ${s?"completed":""}" title="Created ${o}">
        ${this.escapeHtml(t.text)}
      </div>
      <div class="todo-actions">
        <button class="todo-btn complete-btn"
                data-action="toggle"
                data-id="${t.id}"
                title="${s?"Mark as incomplete":"Mark as complete"}"
                aria-label="${s?"Mark as incomplete":"Mark as complete"}">
          ${s?"‚Ü∂":"‚úì"}
        </button>
        <button class="todo-btn delete-btn"
                data-action="delete"
                data-id="${t.id}"
                title="Delete task"
                aria-label="Delete task">
          ‚úï
        </button>
      </div>
    `;const n=e.querySelector('[data-action="toggle"]'),a=e.querySelector('[data-action="delete"]');return n.addEventListener("click",()=>this.completeTodo(t.id)),a.addEventListener("click",()=>this.deleteTodo(t.id)),e}getTimeAgo(t){const s=Date.now()-t,o=Math.floor(s/(1e3*60)),n=Math.floor(s/(1e3*60*60));return o<1?"just now":o<60?`${o}m ago`:n<24?`${n}h ago`:new Date(t).toLocaleDateString()}escapeHtml(t){const e=document.createElement("div");return e.textContent=t,e.innerHTML}addTodoFromExternal(t){try{return this.todoStorage.addTodo(t),this.render(),!0}catch(e){return console.error("Error adding todo externally:",e),!1}}getTodoStats(){return this.todoStorage.getTodoCount()}clearCompleted(){const t=this.todoStorage.clearCompleted();return this.render(),t}getCacheInfo(){return this.todoStorage.getTimeUntilExpiry()}refresh(){this.render()}}const v=document.createElement("style");v.textContent=`
  @keyframes slideOut {
    from {
      opacity: 1;
      transform: translateX(0);
      max-height: 60px;
    }
    to {
      opacity: 0;
      transform: translateX(-100%);
      max-height: 0;
      padding: 0;
      margin: 0;
    }
  }

  @keyframes fadeInOut {
    0%, 100% { opacity: 0; transform: translateY(-50%) scale(0.8); }
    50% { opacity: 1; transform: translateY(-50%) scale(1); }
  }

  .todo-item.removing {
    animation: slideOut 0.3s ease-in forwards;
  }

  .todo-input {
    transition: border-color 0.2s ease;
  }

  .todo-btn:active {
    transform: scale(0.95);
  }

  @media (hover: none) and (pointer: coarse) {
    .todo-item {
      touch-action: pan-x;
    }

    .todo-item:hover {
      transform: none;
    }
  }
`;document.head.appendChild(v);class L{constructor(){i(this,"audioContext",null);i(this,"soundEnabled",!0);this.initializeAudioContext(),this.listenForSettingsChanges()}initializeAudioContext(){document.addEventListener("click",()=>{this.audioContext||(this.audioContext=new(window.AudioContext||window.webkitAudioContext))},{once:!0})}listenForSettingsChanges(){document.addEventListener("settingsChanged",t=>{const{soundEnabled:e}=t.detail;this.soundEnabled=e})}async playNotification(t){if(this.soundEnabled)try{"Notification"in window&&Notification.permission==="default"&&await Notification.requestPermission(),this.showBrowserNotification(t),await this.playAudioNotification(t)}catch(e){console.warn("Failed to play notification:",e)}}showBrowserNotification(t){if("Notification"in window&&Notification.permission==="granted"){const e={icon:"/vite.svg",badge:"/vite.svg",requireInteraction:!1,tag:"fokus-timer"};t==="workComplete"?new Notification("Work Session Complete! üéâ",{body:"Great work! Time for a well-deserved break.",...e}):new Notification("Break Time Over! üí™",{body:"Ready to get back to work? Let's stay focused!",...e})}}async playAudioNotification(t){this.audioContext||(this.audioContext=new(window.AudioContext||window.webkitAudioContext)),this.audioContext.state==="suspended"&&await this.audioContext.resume(),t==="workComplete"?await this.playChime():await this.playAlert()}async playChime(){if(!this.audioContext)return;const t=this.audioContext.createGain();t.connect(this.audioContext.destination);const e=[523.25,659.25,783.99],s=.3;for(let o=0;o<e.length;o++)setTimeout(()=>{this.playTone(e[o],s,t,.1)},o*200)}async playAlert(){if(!this.audioContext)return;const t=this.audioContext.createGain();t.connect(this.audioContext.destination);const e=[440,554.37],s=.2;for(let o=0;o<2;o++)setTimeout(()=>{this.playTone(e[o%e.length],s,t,.08)},o*300)}playTone(t,e,s,o){if(!this.audioContext)return;const n=this.audioContext.createOscillator(),a=this.audioContext.createGain();n.connect(a),a.connect(s),n.frequency.setValueAtTime(t,this.audioContext.currentTime),n.type="sine",a.gain.setValueAtTime(0,this.audioContext.currentTime),a.gain.linearRampToValueAtTime(o,this.audioContext.currentTime+.01),a.gain.exponentialRampToValueAtTime(.001,this.audioContext.currentTime+e),n.start(this.audioContext.currentTime),n.stop(this.audioContext.currentTime+e)}setSoundEnabled(t){this.soundEnabled=t}async testNotification(){await this.playNotification("workComplete")}}const g=class g{constructor(){}static getInstance(){return g.instance||(g.instance=new g),g.instance}saveSettings(t){try{localStorage.setItem(m.SETTINGS,JSON.stringify(t))}catch(e){console.warn("Failed to save settings:",e)}}loadSettings(){try{const t=localStorage.getItem(m.SETTINGS);return t?JSON.parse(t):null}catch(t){return console.warn("Failed to load settings:",t),null}}saveStatistics(t){try{localStorage.setItem(m.STATISTICS,JSON.stringify(t))}catch(e){console.warn("Failed to save statistics:",e)}}loadStatistics(){try{const t=localStorage.getItem(m.STATISTICS);return t?JSON.parse(t):null}catch(t){return console.warn("Failed to load statistics:",t),null}}saveSessionRecord(t){try{const e=this.loadSessionHistory();e.push(t);const s=e.slice(-100);localStorage.setItem(m.SESSION_HISTORY,JSON.stringify(s))}catch(e){console.warn("Failed to save session record:",e)}}loadSessionHistory(){try{const t=localStorage.getItem(m.SESSION_HISTORY);return t?JSON.parse(t):[]}catch(t){return console.warn("Failed to load session history:",t),[]}}getSessionsForDate(t){return this.loadSessionHistory().filter(s=>s.date===t)}getSessionsForDateRange(t,e){return this.loadSessionHistory().filter(o=>o.date>=t&&o.date<=e)}calculateDailyStats(t){const e=this.getSessionsForDate(t),s=e.filter(r=>r.sessionType==="work"&&r.completed),o=e.filter(r=>r.sessionType!=="work"&&r.completed),n=s.reduce((r,S)=>r+S.duration,0),a=o.reduce((r,S)=>r+S.duration,0);return{date:t,sessionsCompleted:s.length,focusTimeMinutes:n,breakTimeMinutes:a,streak:this.calculateStreak(t)}}calculateStreak(t){const e=this.getUniqueDatesWithSessions();if(e.length===0)return 0;e.sort((a,r)=>new Date(r).getTime()-new Date(a).getTime());let s=0;const o=new Date(t);let n=new Date(o);for(let a=0;a<e.length;a++){const r=new Date(e[a]);if(this.isSameDate(r,n))if(this.calculateDailyStats(e[a]).sessionsCompleted>0)s++,n.setDate(n.getDate()-1);else break;else if(r<n)break}return s}getUniqueDatesWithSessions(){const t=this.loadSessionHistory();return[...new Set(t.map(s=>s.date))]}isSameDate(t,e){return t.toISOString().split("T")[0]===e.toISOString().split("T")[0]}exportData(){const t={settings:this.loadSettings(),statistics:this.loadStatistics(),sessionHistory:this.loadSessionHistory(),exportDate:new Date().toISOString()};return JSON.stringify(t,null,2)}importData(t){try{const e=JSON.parse(t);return e.settings&&this.saveSettings(e.settings),e.statistics&&this.saveStatistics(e.statistics),e.sessionHistory&&Array.isArray(e.sessionHistory)&&localStorage.setItem(m.SESSION_HISTORY,JSON.stringify(e.sessionHistory)),!0}catch(e){return console.error("Failed to import data:",e),!1}}clearAllData(){try{localStorage.removeItem(m.SETTINGS),localStorage.removeItem(m.STATISTICS),localStorage.removeItem(m.SESSION_HISTORY)}catch(t){console.warn("Failed to clear data:",t)}}getStorageInfo(){try{let t=0;for(const e in localStorage)localStorage.hasOwnProperty(e)&&(t+=localStorage[e].length+e.length);return{used:t,available:5*1024*1024-t}}catch(t){return console.warn("Failed to get storage info:",t),{used:0,available:0}}}};i(g,"instance");let T=g;class N{constructor(){i(this,"isDark",!1);i(this,"toggleButton",null);i(this,"themeIcon",null);this.initializeTheme(),this.setupToggleButton()}initializeTheme(){const t=localStorage.getItem("fokus-theme"),e=window.matchMedia("(prefers-color-scheme: dark)").matches;this.isDark=t?t==="dark":e,this.applyTheme(),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",s=>{localStorage.getItem("fokus-theme")||(this.isDark=s.matches,this.applyTheme(),this.updateToggleIcon())})}setupToggleButton(){this.toggleButton=document.getElementById("theme-toggle"),this.themeIcon=document.querySelector(".theme-icon"),this.toggleButton&&this.toggleButton.addEventListener("click",()=>{this.toggleTheme()}),this.updateToggleIcon()}applyTheme(){this.isDark?(document.body.classList.remove("light"),document.body.classList.add("dark")):(document.body.classList.remove("dark"),document.body.classList.add("light"))}updateToggleIcon(){this.themeIcon&&(this.themeIcon.textContent=this.isDark?"‚òÄÔ∏è":"üåô")}toggleTheme(){this.isDark=!this.isDark,this.applyTheme(),this.updateToggleIcon(),localStorage.setItem("fokus-theme",this.isDark?"dark":"light")}getCurrentTheme(){return this.isDark?"dark":"light"}}class O{constructor(){i(this,"timer");i(this,"display");i(this,"controls");i(this,"statistics");i(this,"settings");i(this,"todoList");i(this,"audioManager");i(this,"storageManager");i(this,"todoStorage");i(this,"themeManager");this.storageManager=T.getInstance(),this.todoStorage=f.getInstance(),this.timer=new w,this.audioManager=new L,this.initializeComponents(),this.initializeLuxuryEffects(),this.bindGlobalEvents(),this.setupNotifications(),this.setupPWAFeatures(),this.handleURLParameters(),console.log("üéØ Fokus App with minimal luxury design initialized successfully!")}initializeLuxuryEffects(){this.themeManager=new N,this.themeManager,this.setupInfoPopup()}setupInfoPopup(){const t=document.getElementById("info-btn"),e=document.getElementById("info-popup"),s=document.getElementById("close-popup");!t||!e||!s||(t.addEventListener("click",()=>{e.classList.add("active"),document.body.style.overflow="hidden"}),s.addEventListener("click",()=>{e.classList.remove("active"),document.body.style.overflow=""}),e.addEventListener("click",o=>{o.target===e&&(e.classList.remove("active"),document.body.style.overflow="")}),document.addEventListener("keydown",o=>{o.key==="Escape"&&e.classList.contains("active")&&(e.classList.remove("active"),document.body.style.overflow="")}))}initializeComponents(){this.display=new D(this.timer),this.controls=new C(this.timer),this.statistics=new b(this.timer),this.settings=new x(this.timer),this.todoList=new B,this.display,this.controls,this.statistics,this.settings,this.todoList}bindGlobalEvents(){this.timer.addEventListener("timerUpdate",t=>{const e=t.detail;e.state===d.COMPLETED&&this.handleSessionCompletion(e)}),document.addEventListener("visibilitychange",()=>{document.hidden&&this.timer.getState()===d.RUNNING&&this.updateTabTitle()}),window.addEventListener("beforeunload",t=>{if(this.timer.getState()===d.RUNNING)return t.preventDefault(),t.returnValue="You have an active timer running. Are you sure you want to leave?",t.returnValue})}setupNotifications(){document.addEventListener("click",()=>{"Notification"in window&&Notification.permission==="default"&&Notification.requestPermission().then(t=>{t==="granted"&&console.log("‚úÖ Notifications enabled")})},{once:!0})}async handleSessionCompletion(t){const{sessionType:e}=t;e===c.WORK?await this.audioManager.playNotification("workComplete"):await this.audioManager.playNotification("breakComplete"),this.recordSession(e)}recordSession(t){const e=this.timer.getSettings(),s=t===c.WORK?e.workDuration:t===c.SHORT_BREAK?e.shortBreak:e.longBreak,o={id:this.generateSessionId(),date:new Date().toISOString().split("T")[0],sessionType:t,duration:s,completed:!0,startTime:new Date(Date.now()-s*60*1e3).toISOString(),endTime:new Date().toISOString()};this.storageManager.saveSessionRecord(o)}generateSessionId(){return`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}setupPWAFeatures(){"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(e=>{console.log("SW registered: ",e)}).catch(e=>{console.log("SW registration failed: ",e)})});let t;window.addEventListener("beforeinstallprompt",e=>{e.preventDefault(),t=e,setTimeout(()=>{this.showInstallPrompt(t)},3e4)}),window.addEventListener("appinstalled",()=>{console.log("Fokus has been installed!"),t=null})}showInstallPrompt(t){var s,o;if(!t)return;const e=document.createElement("div");e.style.cssText=`
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: var(--primary-gradient);
      color: white;
      padding: 1rem 1.5rem;
      border-radius: var(--radius-xl);
      box-shadow: var(--shadow-glass);
      backdrop-filter: var(--glass-blur);
      z-index: 1000;
      display: flex;
      align-items: center;
      gap: 1rem;
      max-width: 300px;
      animation: slideIn 0.3s ease-out;
    `,e.innerHTML=`
      <div>
        <div style="font-weight: 600; margin-bottom: 0.25rem;">Install Fokus</div>
        <div style="font-size: 0.875rem; opacity: 0.9;">Get the full app experience</div>
      </div>
      <button id="install-btn" style="
        background: rgba(255,255,255,0.2);
        border: none;
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        cursor: pointer;
        font-weight: 600;
        white-space: nowrap;
      ">Install</button>
      <button id="dismiss-btn" style="
        background: none;
        border: none;
        color: white;
        cursor: pointer;
        font-size: 1.25rem;
        padding: 0.25rem;
        margin-left: 0.5rem;
      ">‚úï</button>
    `,document.body.appendChild(e),(s=e.querySelector("#install-btn"))==null||s.addEventListener("click",()=>{t.prompt(),t.userChoice.then(n=>{n.outcome==="accepted"&&console.log("User accepted the install prompt"),t=null,e.remove()})}),(o=e.querySelector("#dismiss-btn"))==null||o.addEventListener("click",()=>{e.remove()}),setTimeout(()=>{e.parentNode&&e.remove()},1e4)}handleURLParameters(){const e=new URLSearchParams(window.location.search).get("action");switch(e){case"start":this.timer.getState()===d.IDLE&&setTimeout(()=>this.timer.start(),1e3);break;case"add-task":setTimeout(()=>{const s=document.querySelector(".todo-input");s&&(s.focus(),s.scrollIntoView({behavior:"smooth",block:"center"}))},500);break}e&&window.history.replaceState({},document.title,window.location.pathname)}updateTabTitle(){const t=this.timer.getState(),e=this.timer.getTimeRemaining(),s=this.timer.getSessionType();if(t===d.RUNNING){const o=Math.floor(e/60),n=e%60,a=`${o.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`,r=s===c.WORK?"Work":"Break";document.title=`${a} - ${r} | Fokus`}else document.title="Fokus - Pomodoro Timer"}getTimer(){return this.timer}getStorageManager(){return this.storageManager}async testNotification(){await this.audioManager.testNotification()}getTodoList(){return this.todoList}getTodoStorage(){return this.todoStorage}}document.addEventListener("DOMContentLoaded",()=>{const l=new O;window.fokusApp=l});window.addEventListener("error",l=>{console.error("Fokus App Error:",l.error)});window.addEventListener("unhandledrejection",l=>{console.error("Unhandled Promise Rejection:",l.reason),l.preventDefault()});
//# sourceMappingURL=index-vO0c4Hy_.js.map
